{"version":3,"sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@try/color-picker/lib/formats.ts","ng://@try/color-picker/lib/helpers.ts","ng://@try/color-picker/lib/color-picker.service.ts","ng://@try/color-picker/lib/color-picker.component.ts","ng://@try/color-picker/lib/color-picker.directive.ts","ng://@try/color-picker/lib/color-picker.module.ts"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","metadataKey","metadataValue","metadata","ColorFormats","Cmyk","m","y","k","this","h","s","l","a","v","g","b","TextDirective","newValue","EventEmitter","prototype","inputChange","event","value","rg","undefined","emit","numeric","parseFloat","tslib_1.__decorate","Input","Output","HostListener","Directive","selector","SliderDirective","elRef","_this","dragEnd","dragStart","listenerMove","move","listenerStop","stop","mouseDown","start","touchStart","preventDefault","setCursor","stopPropagation","document","addEventListener","removeEventListener","getX","position","nativeElement","getBoundingClientRect","pageX","touches","left","window","pageXOffset","getY","pageY","top","pageYOffset","width","offsetWidth","height","offsetHeight","x","Math","max","min","rgX","rgY","ElementRef","SliderPosition","SliderDimension","ColorPickerService","active","setActive","cpDialogDisplay","closeDialog","hsva2hsla","hsva","Hsla","abs","hsla2hsva","hsla","Hsva","hsvaToRgba","floor","f","p","q","t","Rgba","rgbaToCmyk","rgba","rgbaToHsva","rgbaToHex","allowHex8","hex","toString","substr","round","denormalizeRGBA","stringToHsva","colorString","toLowerCase","stringParsers","re","parse","execResult","parseInt","isNaN","push","hasOwnProperty","parser","match","exec","color","outputFormat","alphaChannel","hslaText","Injectable","ColorPickerComponent","cdRef","service","isIE10","dialogArrowSize","dialogArrowOffset","dialogInputFields","HEX","RGBA","HSLA","useRootViewContainer","handleEsc","show","onCancelColor","handleEnter","onAcceptColor","ngOnInit","slider","hueWidth","hueSlider","alphaWidth","alphaSlider","sliderDimMax","cpWidth","cpOutputFormat","format","listenerMouseDown","onMouseDown","listenerResize","onResize","openDialog","initialColor","ngOnDestroy","ngAfterViewInit","updateColorPicker","detectChanges","directiveElementRef","setInitialColor","setColorFromString","openColorPicker","closeColorPicker","setupDialog","instance","elementRef","cpHeight","cpFallbackColor","cpColorMode","cpAlphaChannel","cpDisableInput","cpIgnoredElements","cpSaveClickOutside","cpUseRootViewContainer","cpPosition","cpPositionOffset","cpPositionRelativeToArrow","cpPresetLabel","cpPresetColors","cpMaxPresetColorsLength","cpPresetEmptyMessage","cpPresetEmptyMessageClass","cpOKButton","cpOKButtonClass","cpOKButtonText","cpCancelButton","cpCancelButtonClass","cpCancelButtonText","cpAddColorButton","cpAddColorButtonClass","cpAddColorButtonText","cpRemoveColorButtonClass","setColorMode","ua","navigator","userAgent","msie","indexOf","substring","detectIE","directiveInstance","fallbackColor","setPresetConfig","mode","toUpperCase","update","sliderH","setDialogPosition","onDragEnd","sliderDragEnd","outputColor","onDragStart","sliderDragStart","isDescendant","filter","item","colorChanged","colorSelected","colorCanceled","onFormatToggle","change","availableFormats","nextFormat","onColorChange","sliderChanged","onHueChange","onValueChange","onAlphaChange","onHexInput","validHex","valid","test","split","map","join","inputChanged","input","onRedInput","onBlueInput","onGreenInput","onHueInput","onValueInput","onAlphaInput","onLightnessInput","onSaturationInput","onAddPresetColor","concat","presetColorsChanged","onRemovePresetColor","hidden","setTimeout","stateChanged","lastOutput","hue","rgbaText","hexText","hexAlpha","hueSliderColor","alphaSliderColor","selectedColor","transform","style","parentNode","transformNode","node","dialogHeight","dialogElement","tagName","getComputedStyle","getPropertyValue","boxDirective","createDialogBox","HTMLUnknownElement","boxParent","arrowTop","parent","child","element","offset","ViewChild","Component","template","preserveWhitespaces","encapsulation","ViewEncapsulation","None","ChangeDetectorRef","ColorPickerDirective","injector","cfr","appRef","vcRef","_service","dialogCreated","ignoreChanges","cpToggle","cpDisabled","cpInputChange","cpToggleChange","cpSliderChange","cpSliderDragEnd","cpSliderDragStart","colorPickerOpen","colorPickerClose","colorPickerCancel","colorPickerSelect","colorPickerChange","cpPresetColorsChange","handleClick","inputFocus","handleFocus","handleInput","cmpRef","destroy","ngOnChanges","changes","currentValue","colorPicker","dialog","changeDetectorRef","classOfRootComponent","componentTypes","appInstance","get","viewContainerRef","console","warn","compFactory","resolveComponentFactory","ReflectiveInjector","fromResolvedProviders","parentInjector","createComponent","state","ignore","ignored","activeElement","exportAs","Injector","ComponentFactoryResolver","ApplicationRef","ViewContainerRef","ColorPickerModule","NgModule","imports","CommonModule","OverlayModule","exports","providers","declarations","entryComponents"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export enum ColorFormats {\n  HEX,\n  RGBA,\n  HSLA\n}\n\nexport class Cmyk {\n  constructor(public c: number, public m: number, public y: number, public k: number) {}\n}\n\nexport class Hsla {\n  constructor(public h: number, public s: number, public l: number, public a: number) {}\n}\n\nexport class Hsva {\n  constructor(public h: number, public s: number, public v: number, public a: number) {}\n}\n\nexport class Rgba {\n  constructor(public r: number, public g: number, public b: number, public a: number) {}\n}\n","import { Directive, Input, Output, EventEmitter, HostListener, ElementRef } from '@angular/core';\n\nexport type ColorMode = 'color' | 'c' | '1' |\n  'grayscale' | 'g' | '2' | 'presets' | 'p' | '3';\n\nexport type AlphaChannel = 'enabled' | 'disabled' | 'always' | 'forced';\n\nexport type OutputFormat = 'auto' | 'hex' | 'rgba' | 'hsla';\n\nexport function detectIE(): boolean | number {\n  let ua = '';\n\n  if (typeof navigator !== 'undefined') {\n    ua = navigator.userAgent.toLowerCase();\n  }\n\n  const msie = ua.indexOf('msie ');\n\n  if (msie > 0) {\n    // IE 10 or older => return version number\n    return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n  }\n\n  // Other browser\n  return false;\n}\n\n@Directive({\n  selector: '[text]'\n})\nexport class TextDirective {\n  @Input() rg: number;\n  @Input() text: any;\n\n  @Output() newValue = new EventEmitter<any>();\n\n  @HostListener('input', ['$event']) inputChange(event: any): void {\n    const value = event.target.value;\n\n    if (this.rg === undefined) {\n      this.newValue.emit(value);\n    } else {\n      const numeric = parseFloat(value);\n\n      this.newValue.emit({ v: numeric, rg: this.rg });\n    }\n  }\n}\n\n@Directive({\n  selector: '[slider]'\n})\nexport class SliderDirective {\n  private listenerMove: any;\n  private listenerStop: any;\n\n  @Input() rgX: number;\n  @Input() rgY: number;\n\n  @Input() slider: string;\n\n  @Output() dragEnd = new EventEmitter();\n  @Output() dragStart = new EventEmitter();\n\n  @Output() newValue = new EventEmitter<any>();\n\n  @HostListener('mousedown', ['$event']) mouseDown(event: any): void {\n    this.start(event);\n  }\n\n  @HostListener('touchstart', ['$event']) touchStart(event: any): void {\n    this.start(event);\n  }\n\n  constructor(private elRef: ElementRef) {\n    this.listenerMove = (event: any) => this.move(event);\n\n    this.listenerStop = () => this.stop();\n  }\n\n  private move(event: any): void {\n    event.preventDefault();\n\n    this.setCursor(event);\n  }\n\n  private start(event: any): void {\n    this.setCursor(event);\n\n    event.stopPropagation();\n\n    document.addEventListener('mouseup', this.listenerStop);\n    document.addEventListener('touchend', this.listenerStop);\n    document.addEventListener('mousemove', this.listenerMove);\n    document.addEventListener('touchmove', this.listenerMove);\n\n    this.dragStart.emit();\n  }\n\n  private stop(): void {\n    document.removeEventListener('mouseup', this.listenerStop);\n    document.removeEventListener('touchend', this.listenerStop);\n    document.removeEventListener('mousemove', this.listenerMove);\n    document.removeEventListener('touchmove', this.listenerMove);\n\n    this.dragEnd.emit();\n  }\n\n  private getX(event: any): number {\n    const position = this.elRef.nativeElement.getBoundingClientRect();\n\n    const pageX = (event.pageX !== undefined) ? event.pageX : event.touches[0].pageX;\n\n    return pageX - position.left - window.pageXOffset;\n  }\n\n  private getY(event: any): number {\n    const position = this.elRef.nativeElement.getBoundingClientRect();\n\n    const pageY = (event.pageY !== undefined) ? event.pageY : event.touches[0].pageY;\n\n    return pageY - position.top - window.pageYOffset;\n  }\n\n  private setCursor(event: any): void {\n    const width = this.elRef.nativeElement.offsetWidth;\n    const height = this.elRef.nativeElement.offsetHeight;\n\n    const x = Math.max(0, Math.min(this.getX(event), width));\n    const y = Math.max(0, Math.min(this.getY(event), height));\n\n    if (this.rgX !== undefined && this.rgY !== undefined) {\n      this.newValue.emit({ s: x / width, v: (1 - y / height), rgX: this.rgX, rgY: this.rgY });\n    } else if (this.rgX === undefined && this.rgY !== undefined) {\n      this.newValue.emit({ v: y / height, rgY: this.rgY });\n    } else if (this.rgX !== undefined && this.rgY === undefined) {\n      this.newValue.emit({ v: x / width, rgX: this.rgX });\n    }\n  }\n}\n\nexport class SliderPosition {\n  constructor(public h: number, public s: number, public v: number, public a: number) {}\n}\n\nexport class SliderDimension {\n  constructor(public h: number, public s: number, public v: number, public a: number) {}\n}\n","import { Injectable } from '@angular/core';\n\nimport { Cmyk, Rgba, Hsla, Hsva } from './formats';\n\nimport { ColorPickerComponent } from './color-picker.component';\n\n@Injectable()\nexport class ColorPickerService {\n  private active: ColorPickerComponent | null = null;\n\n  constructor() {}\n\n  public setActive(active: ColorPickerComponent | null): void {\n    if (this.active && this.active !== active && this.active.cpDialogDisplay !== 'inline') {\n      this.active.closeDialog();\n    }\n\n    this.active = active;\n  }\n\n  public hsva2hsla(hsva: Hsva): Hsla {\n    const h = hsva.h, s = hsva.s, v = hsva.v, a = hsva.a;\n\n    if (v === 0) {\n      return new Hsla(h, 0, 0, a);\n    } else if (s === 0 && v === 1) {\n      return new Hsla(h, 1, 1, a);\n    } else {\n      const l = v * (2 - s) / 2;\n\n      return new Hsla(h, v * s / (1 - Math.abs(2 * l - 1)), l, a);\n    }\n  }\n\n  public hsla2hsva(hsla: Hsla): Hsva {\n    const h = Math.min(hsla.h, 1), s = Math.min(hsla.s, 1);\n    const l = Math.min(hsla.l, 1), a = Math.min(hsla.a, 1);\n\n    if (l === 0) {\n      return new Hsva(h, 0, 0, a);\n    } else {\n      const v = l + s * (1 - Math.abs(2 * l - 1)) / 2;\n\n      return new Hsva(h, 2 * (v - l) / v, v, a);\n    }\n  }\n\n  public hsvaToRgba(hsva: Hsva): Rgba {\n    let r: number, g: number, b: number;\n\n    const h = hsva.h, s = hsva.s, v = hsva.v, a = hsva.a;\n\n    const i = Math.floor(h * 6);\n    const f = h * 6 - i;\n    const p = v * (1 - s);\n    const q = v * (1 - f * s);\n    const t = v * (1 - (1 - f) * s);\n\n    switch (i % 6) {\n      case 0:\n        r = v, g = t, b = p;\n        break;\n      case 1:\n        r = q, g = v, b = p;\n        break;\n      case 2:\n        r = p, g = v, b = t;\n        break;\n      case 3:\n        r = p, g = q, b = v;\n        break;\n      case 4:\n        r = t, g = p, b = v;\n        break;\n      case 5:\n        r = v, g = p, b = q;\n        break;\n      default:\n        r = 0, g = 0, b = 0;\n    }\n\n    return new Rgba(r, g, b, a);\n  }\n\n  public rgbaToCmyk(rgba: Rgba): Cmyk {\n    const k: number = 1 - Math.max(rgba.r, rgba.g, rgba.b);\n\n    if (k === 1) {\n      return new Cmyk(0, 0, 0, 1);\n    } else {\n      const c = (1 - rgba.r - k) / (1 - k);\n      const m = (1 - rgba.g - k) / (1 - k);\n      const y = (1 - rgba.b - k) / (1 - k);\n\n      return new Cmyk(c, m, y, k);\n    }\n  }\n\n  public rgbaToHsva(rgba: Rgba): Hsva {\n    let h: number, s: number;\n\n    const r = Math.min(rgba.r, 1), g = Math.min(rgba.g, 1);\n    const b = Math.min(rgba.b, 1), a = Math.min(rgba.a, 1);\n\n    const max = Math.max(r, g, b), min = Math.min(r, g, b);\n\n    const v: number = max, d = max - min;\n\n    s = (max === 0) ? 0 : d / max;\n\n    if (max === min) {\n      h = 0;\n    } else {\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n        case g:\n          h = (b - r) / d + 2;\n          break;\n        case b:\n          h = (r - g) / d + 4;\n          break;\n        default:\n          h = 0;\n      }\n\n      h /= 6;\n    }\n\n    return new Hsva(h, s, v, a);\n  }\n\n  public rgbaToHex(rgba: Rgba, allowHex8?: boolean): string {\n    /* tslint:disable:no-bitwise */\n    let hex = '#' + ((1 << 24) | (rgba.r << 16) | (rgba.g << 8) | rgba.b).toString(16).substr(1);\n\n    if (allowHex8) {\n      hex += ((1 << 8) | Math.round(rgba.a * 255)).toString(16).substr(1);\n    }\n    /* tslint:enable:no-bitwise */\n\n    return hex;\n  }\n\n  public denormalizeRGBA(rgba: Rgba): Rgba {\n    return new Rgba(Math.round(rgba.r * 255), Math.round(rgba.g * 255), Math.round(rgba.b * 255), rgba.a);\n  }\n\n  public stringToHsva(colorString: string = '', allowHex8: boolean = false): Hsva | null {\n    let hsva: Hsva | null = null;\n\n    colorString = (colorString || '').toLowerCase();\n\n    const stringParsers = [\n      {\n        re: /(rgb)a?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*%?,\\s*(\\d{1,3})\\s*%?(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,\n        parse: function(execResult: any) {\n          return new Rgba(parseInt(execResult[2], 10) / 255,\n            parseInt(execResult[3], 10) / 255,\n            parseInt(execResult[4], 10) / 255,\n            isNaN(parseFloat(execResult[5])) ? 1 : parseFloat(execResult[5]));\n        }\n      }, {\n        re: /(hsl)a?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})%\\s*,\\s*(\\d{1,3})%\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,\n        parse: function(execResult: any) {\n          return new Hsla(parseInt(execResult[2], 10) / 360,\n            parseInt(execResult[3], 10) / 100,\n            parseInt(execResult[4], 10) / 100,\n            isNaN(parseFloat(execResult[5])) ? 1 : parseFloat(execResult[5]));\n        }\n      }\n    ];\n\n    if (allowHex8) {\n      stringParsers.push({\n        re: /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,\n        parse: function(execResult: any) {\n          return new Rgba(parseInt(execResult[1], 16) / 255,\n            parseInt(execResult[2], 16) / 255,\n            parseInt(execResult[3], 16) / 255,\n            parseInt(execResult[4] || 'FF', 16) / 255);\n        }\n      });\n    } else {\n      stringParsers.push({\n        re: /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,\n        parse: function(execResult: any) {\n          return new Rgba(parseInt(execResult[1], 16) / 255,\n            parseInt(execResult[2], 16) / 255,\n            parseInt(execResult[3], 16) / 255,\n            1);\n        }\n      });\n    }\n\n    stringParsers.push({\n      re: /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,\n      parse: function(execResult: any) {\n        return new Rgba(parseInt(execResult[1] + execResult[1], 16) / 255,\n          parseInt(execResult[2] + execResult[2], 16) / 255,\n          parseInt(execResult[3] + execResult[3], 16) / 255,\n          1);\n      }\n    });\n\n    for (const key in stringParsers) {\n      if (stringParsers.hasOwnProperty(key)) {\n        const parser = stringParsers[key];\n\n        const match = parser.re.exec(colorString), color: any = match && parser.parse(match);\n\n        if (color) {\n          if (color instanceof Rgba) {\n            hsva = this.rgbaToHsva(color);\n          } else if (color instanceof Hsla) {\n            hsva = this.hsla2hsva(color);\n          }\n\n          return hsva;\n        }\n      }\n    }\n\n    return hsva;\n  }\n\n  public outputFormat(hsva: Hsva, outputFormat: string, alphaChannel: string | null): string {\n    if (outputFormat === 'auto') {\n      outputFormat = hsva.a < 1 ? 'rgba' : 'hex';\n    }\n\n    switch (outputFormat) {\n      case 'hsla':\n        const hsla = this.hsva2hsla(hsva);\n\n        const hslaText = new Hsla(Math.round((hsla.h) * 360), Math.round(hsla.s * 100),\n          Math.round(hsla.l * 100), Math.round(hsla.a * 100) / 100);\n\n        if (hsva.a < 1 || alphaChannel === 'always') {\n          return 'hsla(' + hslaText.h + ',' + hslaText.s + '%,' + hslaText.l + '%,' +\n            hslaText.a + ')';\n        } else {\n          return 'hsl(' + hslaText.h + ',' + hslaText.s + '%,' + hslaText.l + '%)';\n        }\n\n      case 'rgba':\n        const rgba = this.denormalizeRGBA(this.hsvaToRgba(hsva));\n\n        if (hsva.a < 1 || alphaChannel === 'always') {\n          return 'rgba(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ',' +\n            Math.round(rgba.a * 100) / 100 + ')';\n        } else {\n          return 'rgb(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ')';\n        }\n\n      default:\n        const allowHex8 = (alphaChannel === 'always' || alphaChannel === 'forced');\n\n        return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(hsva)), allowHex8);\n    }\n  }\n}\n","import { Component, OnInit, OnDestroy, AfterViewInit,\n  ViewChild, HostListener, ViewEncapsulation,\n  ElementRef, ChangeDetectorRef } from '@angular/core';\n\nimport { detectIE } from './helpers';\n\nimport { ColorFormats, Hsla, Hsva, Rgba } from './formats';\nimport { AlphaChannel, OutputFormat, SliderDimension, SliderPosition } from './helpers';\n\nimport { ColorPickerService } from './color-picker.service';\n\nimport {Overlay} from '@angular/cdk/overlay'\n\n@Component({\n  selector: 'color-picker',\n  templateUrl: 'color-picker.component.html',\n  styleUrls: [ 'color-picker.component.scss' ],\n  preserveWhitespaces: false,\n  encapsulation: ViewEncapsulation.None\n})\nexport class ColorPickerComponent implements OnInit, OnDestroy, AfterViewInit {\n  private isIE10: boolean = false;\n\n  private hsva: Hsva;\n\n  private width: number;\n  private height: number;\n\n  private outputColor: string;\n  private initialColor: string;\n  private fallbackColor: string;\n\n  private listenerResize: any;\n  private listenerMouseDown: any;\n\n  private directiveInstance: any;\n\n  private sliderH: number;\n  private sliderDimMax: SliderDimension;\n  private directiveElementRef: ElementRef;\n\n  private dialogArrowSize: number = 10;\n  private dialogArrowOffset: number = 15;\n\n  private dialogInputFields: ColorFormats[] = [\n    ColorFormats.HEX,\n    ColorFormats.RGBA,\n    ColorFormats.HSLA\n  ];\n\n  private useRootViewContainer: boolean = false;\n\n  public show: boolean;\n  public hidden: boolean;\n\n  public top: number;\n  public left: number;\n  public position: string;\n\n  public format: ColorFormats;\n  public slider: SliderPosition;\n\n  public hexText: string;\n  public hexAlpha: number;\n\n  public hslaText: Hsla;\n  public rgbaText: Rgba;\n\n  public arrowTop: number;\n\n  public selectedColor: string;\n  public hueSliderColor: string;\n  public alphaSliderColor: string;\n\n  public cpWidth: number;\n  public cpHeight: number;\n\n  public cpColorMode: number;\n\n  public cpAlphaChannel: AlphaChannel;\n  public cpOutputFormat: OutputFormat;\n\n  public cpDisableInput: boolean;\n  public cpDialogDisplay: string;\n\n  public cpIgnoredElements: any;\n  public cpSaveClickOutside: boolean;\n\n  public cpPosition: string;\n  public cpPositionOffset: number;\n\n  public cpOKButton: boolean;\n  public cpOKButtonText: string;\n  public cpOKButtonClass: string;\n\n  public cpCancelButton: boolean;\n  public cpCancelButtonText: string;\n  public cpCancelButtonClass: string;\n\n  public cpPresetLabel: string;\n  public cpPresetColors: string[];\n  public cpMaxPresetColorsLength: number;\n\n  public cpPresetEmptyMessage: string;\n  public cpPresetEmptyMessageClass: string;\n\n  public cpAddColorButton: boolean;\n  public cpAddColorButtonText: string;\n  public cpAddColorButtonClass: string;\n  public cpRemoveColorButtonClass: string;\n\n  @ViewChild('dialogPopup') dialogElement: ElementRef;\n\n  @ViewChild('hueSlider') hueSlider: ElementRef;\n  @ViewChild('alphaSlider') alphaSlider: ElementRef;\n\n  @HostListener('document:keyup.esc', ['$event']) handleEsc(event: any): void {\n    if (this.show && this.cpDialogDisplay === 'popup') {\n      this.onCancelColor(event);\n    }\n  }\n\n  @HostListener('document:keyup.enter', ['$event']) handleEnter(event: any): void {\n    if (this.show && this.cpDialogDisplay === 'popup') {\n      this.onAcceptColor(event);\n    }\n  }\n\n  constructor(private elRef: ElementRef, private cdRef: ChangeDetectorRef, private service: ColorPickerService) {}\n\n  ngOnInit(): void {\n    this.slider = new SliderPosition(0, 0, 0, 0);\n\n    const hueWidth = this.hueSlider.nativeElement.offsetWidth || 140;\n    const alphaWidth = this.alphaSlider.nativeElement.offsetWidth || 140;\n\n    this.sliderDimMax = new SliderDimension(hueWidth, this.cpWidth, 130, alphaWidth);\n\n    if (this.cpOutputFormat === 'rgba') {\n      this.format = ColorFormats.RGBA;\n    } else if (this.cpOutputFormat === 'hsla') {\n      this.format = ColorFormats.HSLA;\n    } else {\n      this.format = ColorFormats.HEX;\n    }\n\n    this.listenerMouseDown = (event: any) => { this.onMouseDown(event); };\n    this.listenerResize = () => { this.onResize(); };\n\n    this.openDialog(this.initialColor, false);\n  }\n\n  ngOnDestroy(): void {\n    this.closeDialog();\n  }\n\n  ngAfterViewInit(): void {\n    if (this.cpWidth !== 230 ||this.cpDialogDisplay === 'inline') {\n      const hueWidth = this.hueSlider.nativeElement.offsetWidth || 140;\n      const alphaWidth = this.alphaSlider.nativeElement.offsetWidth || 140;\n\n      this.sliderDimMax = new SliderDimension(hueWidth, this.cpWidth, 130, alphaWidth);\n\n      this.updateColorPicker(false);\n\n      this.cdRef.detectChanges();\n    }\n  }\n\n  public openDialog(color: any, emit: boolean = true): void {\n    this.service.setActive(this);\n\n    if (!this.width) {\n      this.cpWidth = this.directiveElementRef.nativeElement.offsetWidth;\n    }\n\n    if (!this.height) {\n      this.height = 320;\n    }\n\n    this.setInitialColor(color);\n\n    this.setColorFromString(color, emit);\n\n    this.openColorPicker();\n  }\n\n  public closeDialog(): void {\n    this.closeColorPicker();\n  }\n\n  public setupDialog(instance: any, elementRef: ElementRef, color: any,\n    cpWidth: string, cpHeight: string, cpDialogDisplay: string, cpFallbackColor: string,\n    cpColorMode: string, cpAlphaChannel: AlphaChannel, cpOutputFormat: OutputFormat,\n    cpDisableInput: boolean, cpIgnoredElements: any, cpSaveClickOutside: boolean,\n    cpUseRootViewContainer: boolean, cpPosition: string, cpPositionOffset: string,\n    cpPositionRelativeToArrow: boolean, cpPresetLabel: string, cpPresetColors: string[],\n    cpMaxPresetColorsLength: number, cpPresetEmptyMessage: string, cpPresetEmptyMessageClass: string,\n    cpOKButton: boolean, cpOKButtonClass: string, cpOKButtonText: string,\n    cpCancelButton: boolean, cpCancelButtonClass: string, cpCancelButtonText: string,\n    cpAddColorButton: boolean, cpAddColorButtonClass: string, cpAddColorButtonText: string,\n    cpRemoveColorButtonClass: string): void\n  {\n    this.setInitialColor(color);\n\n    this.setColorMode(cpColorMode);\n\n    this.isIE10 = (detectIE() === 10);\n\n    this.directiveInstance = instance;\n    this.directiveElementRef = elementRef;\n\n    this.cpDisableInput = cpDisableInput;\n\n    this.cpAlphaChannel = cpAlphaChannel;\n    this.cpOutputFormat = cpOutputFormat;\n    this.cpDialogDisplay = cpDialogDisplay;\n\n    this.cpIgnoredElements = cpIgnoredElements;\n    this.cpSaveClickOutside = cpSaveClickOutside;\n\n    this.useRootViewContainer = cpUseRootViewContainer;\n\n    this.width = this.cpWidth = parseInt(cpWidth, 10);\n    this.height = this.cpHeight = parseInt(cpHeight, 10);\n\n    this.cpPosition = cpPosition;\n    this.cpPositionOffset = parseInt(cpPositionOffset, 10);\n\n    this.cpOKButton = cpOKButton;\n    this.cpOKButtonText = cpOKButtonText;\n    this.cpOKButtonClass = cpOKButtonClass;\n\n    this.cpCancelButton = cpCancelButton;\n    this.cpCancelButtonText = cpCancelButtonText;\n    this.cpCancelButtonClass = cpCancelButtonClass;\n\n    this.fallbackColor = cpFallbackColor || '#fff';\n\n    this.setPresetConfig(cpPresetLabel, cpPresetColors);\n\n    this.cpMaxPresetColorsLength = cpMaxPresetColorsLength;\n    this.cpPresetEmptyMessage = cpPresetEmptyMessage;\n    this.cpPresetEmptyMessageClass = cpPresetEmptyMessageClass;\n\n    this.cpAddColorButton = cpAddColorButton;\n    this.cpAddColorButtonText = cpAddColorButtonText;\n    this.cpAddColorButtonClass = cpAddColorButtonClass;\n    this.cpRemoveColorButtonClass = cpRemoveColorButtonClass;\n\n    if (!cpPositionRelativeToArrow) {\n      this.dialogArrowOffset = 0;\n    }\n\n    if (cpDialogDisplay === 'inline') {\n      this.dialogArrowSize = 0;\n      this.dialogArrowOffset = 0;\n    }\n\n    if (cpOutputFormat === 'hex' &&\n        cpAlphaChannel !== 'always' && cpAlphaChannel !== 'forced')\n    {\n      this.cpAlphaChannel = 'disabled';\n    }\n  }\n\n  public setColorMode(mode: string): void {\n    switch (mode.toString().toUpperCase()) {\n      case '1':\n      case 'C':\n      case 'COLOR':\n        this.cpColorMode = 1;\n        break;\n      case '2':\n      case 'G':\n      case 'GRAYSCALE':\n        this.cpColorMode = 2;\n        break;\n      case '3':\n      case 'P':\n      case 'PRESETS':\n        this.cpColorMode = 3;\n        break;\n      default:\n        this.cpColorMode = 1;\n    }\n  }\n\n  public setInitialColor(color: any): void {\n    this.initialColor = color;\n  }\n\n  public setPresetConfig(cpPresetLabel: string, cpPresetColors: string[]): void {\n    this.cpPresetLabel = cpPresetLabel;\n    this.cpPresetColors = cpPresetColors;\n  }\n\n  public setColorFromString(value: string, emit: boolean = true, update: boolean = true): void {\n    let hsva: Hsva | null;\n\n    if (this.cpAlphaChannel === 'always' || this.cpAlphaChannel === 'forced') {\n      hsva = this.service.stringToHsva(value, true);\n\n      if (!hsva && !this.hsva) {\n        hsva = this.service.stringToHsva(value, false);\n      }\n    } else {\n      hsva = this.service.stringToHsva(value, false);\n    }\n\n    if (!hsva && !this.hsva) {\n      hsva = this.service.stringToHsva(this.fallbackColor, false);\n    }\n\n    if (hsva) {\n      this.hsva = hsva;\n\n      this.sliderH = this.hsva.h;\n\n      this.updateColorPicker(emit, update);\n    }\n  }\n\n  public onResize(): void {\n    if (this.position === 'fixed') {\n      this.setDialogPosition();\n    } else if (this.cpDialogDisplay !== 'inline') {\n      this.closeColorPicker();\n    }\n  }\n\n  public onDragEnd(slider: string): void {\n    this.directiveInstance.sliderDragEnd({ slider: slider, color: this.outputColor });\n  }\n\n  public onDragStart(slider: string): void {\n    this.directiveInstance.sliderDragStart({ slider: slider, color: this.outputColor });\n  }\n\n  public onMouseDown(event: MouseEvent): void {\n    if (!this.isIE10 && this.cpDialogDisplay === 'popup' &&\n        event.target !== this.directiveElementRef.nativeElement &&\n        !this.isDescendant(this.elRef.nativeElement, event.target) &&\n        !this.isDescendant(this.directiveElementRef.nativeElement, event.target) &&\n        this.cpIgnoredElements.filter((item: any) => item === event.target).length === 0)\n    {\n      if (!this.cpSaveClickOutside) {\n        this.setColorFromString(this.initialColor, false);\n\n        this.directiveInstance.colorChanged(this.initialColor);\n      }\n\n      this.closeColorPicker();\n    }\n  }\n\n  public onAcceptColor(event: Event): void {\n    event.stopPropagation();\n\n    if (this.cpDialogDisplay === 'popup') {\n      this.closeColorPicker();\n    }\n\n    if (this.outputColor) {\n      this.directiveInstance.colorSelected(this.outputColor);\n    }\n  }\n\n  public onCancelColor(event: Event): void {\n    event.stopPropagation();\n\n    this.setColorFromString(this.initialColor, true);\n\n    if (this.cpDialogDisplay === 'popup') {\n      this.directiveInstance.colorChanged(this.initialColor, true);\n\n      this.closeColorPicker();\n    }\n\n    this.directiveInstance.colorCanceled();\n  }\n\n  public onFormatToggle(change: number): void {\n    const availableFormats = this.dialogInputFields.length;\n\n    const nextFormat = (((this.dialogInputFields.indexOf(this.format) + change) %\n      availableFormats) + availableFormats) % availableFormats;\n\n    this.format = this.dialogInputFields[nextFormat];\n  }\n\n  public onColorChange(value: { s: number, v: number, rgX: number, rgY: number }): void {\n    this.hsva.s = value.s / value.rgX;\n    this.hsva.v = value.v / value.rgY;\n\n    this.updateColorPicker();\n\n    this.directiveInstance.sliderChanged({\n      slider: 'lightness',\n      value: this.hsva.v,\n      color: this.outputColor\n    });\n\n    this.directiveInstance.sliderChanged({\n      slider: 'saturation',\n      value: this.hsva.s,\n      color: this.outputColor\n    });\n  }\n\n  public onHueChange(value: { v: number, rgX: number }): void {\n    this.hsva.h = value.v / value.rgX;\n    this.sliderH = this.hsva.h;\n\n    this.updateColorPicker();\n\n    this.directiveInstance.sliderChanged({\n      slider: 'hue',\n      value: this.hsva.h,\n      color: this.outputColor\n    });\n  }\n\n  public onValueChange(value: { v: number, rgX: number }): void {\n    this.hsva.v = value.v / value.rgX;\n\n    this.updateColorPicker();\n\n    this.directiveInstance.sliderChanged({\n      slider: 'value',\n      value: this.hsva.v,\n      color: this.outputColor\n    });\n  }\n\n  public onAlphaChange(value: { v: number, rgX: number }): void {\n    this.hsva.a = value.v / value.rgX;\n\n    this.updateColorPicker();\n\n    this.directiveInstance.sliderChanged({\n      slider: 'alpha',\n      value: this.hsva.a,\n      color: this.outputColor\n    });\n  }\n\n  public onHexInput(value: string | null): void {\n    if (value === null) {\n      this.updateColorPicker();\n    } else {\n      if (value && value[0] !== '#') {\n        value = '#' + value;\n      }\n\n      let validHex = /^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;\n\n      if (this.cpAlphaChannel === 'always') {\n        validHex = /^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi;\n      }\n\n      const valid = validHex.test(value);\n\n      if (valid) {\n        if (value.length < 5) {\n          value = '#' + value.substring(1)\n            .split('')\n            .map(c => c + c)\n            .join('');\n        }\n\n        if (this.cpAlphaChannel === 'forced') {\n          value += Math.round(this.hsva.a * 255).toString(16);\n        }\n\n        this.setColorFromString(value, true, false);\n      }\n\n      this.directiveInstance.inputChanged({\n        input: 'hex',\n        valid: valid,\n        value: value,\n        color: this.outputColor\n      });\n    }\n  }\n\n  public onRedInput(value: { v: number, rg: number }): void {\n    const rgba = this.service.hsvaToRgba(this.hsva);\n\n    const valid = !isNaN(value.v) && value.v >= 0 && value.v <= value.rg;\n\n    if (valid) {\n      rgba.r = value.v / value.rg;\n\n      this.hsva = this.service.rgbaToHsva(rgba);\n\n      this.sliderH = this.hsva.h;\n\n      this.updateColorPicker();\n    }\n\n    this.directiveInstance.inputChanged({\n      input: 'red',\n      valid: valid,\n      value: rgba.r,\n      color: this.outputColor\n    });\n  }\n\n  public onBlueInput(value: { v: number, rg: number }): void {\n    const rgba = this.service.hsvaToRgba(this.hsva);\n\n    const valid = !isNaN(value.v) && value.v >= 0 && value.v <= value.rg;\n\n    if (valid) {\n      rgba.b = value.v / value.rg;\n\n      this.hsva = this.service.rgbaToHsva(rgba);\n\n      this.sliderH = this.hsva.h;\n\n      this.updateColorPicker();\n    }\n\n    this.directiveInstance.inputChanged({\n      input: 'blue',\n      valid: valid,\n      value: rgba.b,\n      color: this.outputColor\n    });\n  }\n\n  public onGreenInput(value: { v: number, rg: number }): void {\n    const rgba = this.service.hsvaToRgba(this.hsva);\n\n    const valid = !isNaN(value.v) && value.v >= 0 && value.v <= value.rg;\n\n    if (valid) {\n      rgba.g = value.v / value.rg;\n\n      this.hsva = this.service.rgbaToHsva(rgba);\n\n      this.sliderH = this.hsva.h;\n\n      this.updateColorPicker();\n    }\n\n    this.directiveInstance.inputChanged({\n      input: 'green',\n      valid: valid,\n      value: rgba.g,\n      color: this.outputColor\n    });\n  }\n\n  public onHueInput(value: { v: number, rg: number }) {\n    const valid = !isNaN(value.v) && value.v >= 0 && value.v <= value.rg;\n\n    if (valid) {\n      this.hsva.h = value.v / value.rg;\n\n      this.sliderH = this.hsva.h;\n\n      this.updateColorPicker();\n    }\n\n    this.directiveInstance.inputChanged({\n      input: 'hue',\n      valid: valid,\n      value: this.hsva.h,\n      color: this.outputColor\n    });\n  }\n\n  public onValueInput(value: { v: number, rg: number }): void {\n    const valid = !isNaN(value.v) && value.v >= 0 && value.v <= value.rg;\n\n    if (valid) {\n      this.hsva.v = value.v / value.rg;\n\n      this.updateColorPicker();\n    }\n\n    this.directiveInstance.inputChanged({\n      input: 'value',\n      valid: valid,\n      value: this.hsva.v,\n      color: this.outputColor\n    });\n  }\n\n  public onAlphaInput(value: { v: number, rg: number }): void {\n    const valid = !isNaN(value.v) && value.v >= 0 && value.v <= value.rg;\n\n    if (valid) {\n      this.hsva.a = value.v / value.rg;\n\n      this.updateColorPicker();\n    }\n\n    this.directiveInstance.inputChanged({\n      input: 'alpha',\n      valid: valid,\n      value: this.hsva.a,\n      color: this.outputColor\n    });\n  }\n\n  public onLightnessInput(value: { v: number, rg: number }): void {\n    const hsla = this.service.hsva2hsla(this.hsva);\n\n    const valid = !isNaN(value.v) && value.v >= 0 && value.v <= value.rg;\n\n    if (valid) {\n      hsla.l = value.v / value.rg;\n\n      this.hsva = this.service.hsla2hsva(hsla);\n\n      this.sliderH = this.hsva.h;\n\n      this.updateColorPicker();\n    }\n\n    this.directiveInstance.inputChanged({\n      input: 'lightness',\n      valid: valid,\n      value: hsla.l,\n      color: this.outputColor\n    });\n  }\n\n  public onSaturationInput(value: { v: number, rg: number }): void {\n    const hsla = this.service.hsva2hsla(this.hsva);\n\n    const valid = !isNaN(value.v) && value.v >= 0 && value.v <= value.rg;\n\n    if (valid) {\n      hsla.s = value.v / value.rg;\n\n      this.hsva = this.service.hsla2hsva(hsla);\n\n      this.sliderH = this.hsva.h;\n\n      this.updateColorPicker();\n    }\n\n    this.directiveInstance.inputChanged({\n      input: 'saturation',\n      valid: valid,\n      value: hsla.s,\n      color: this.outputColor\n    });\n  }\n\n  public onAddPresetColor(event: any, value: string): void {\n    event.stopPropagation();\n\n    if (!this.cpPresetColors.filter((color) => (color === value)).length) {\n      this.cpPresetColors = this.cpPresetColors.concat(value);\n\n      this.directiveInstance.presetColorsChanged(this.cpPresetColors);\n    }\n  }\n\n  public onRemovePresetColor(event: any, value: string): void {\n    event.stopPropagation();\n\n    this.cpPresetColors = this.cpPresetColors.filter((color) => (color !== value));\n\n    this.directiveInstance.presetColorsChanged(this.cpPresetColors);\n  }\n\n  // Private helper functions for the color picker dialog status\n\n  private openColorPicker(): void {\n    if (!this.show) {\n      this.show = true;\n      this.hidden = true;\n\n      setTimeout(() => {\n        this.hidden = false;\n\n        this.setDialogPosition();\n\n        this.cdRef.detectChanges();\n      }, 0);\n\n      this.directiveInstance.stateChanged(true);\n\n      if (!this.isIE10) {\n        document.addEventListener('mousedown', this.listenerMouseDown);\n      }\n\n      window.addEventListener('resize', this.listenerResize);\n    }\n  }\n\n  private closeColorPicker(): void {\n    if (this.show) {\n      this.show = false;\n\n      this.directiveInstance.stateChanged(false);\n\n      if (!this.isIE10) {\n        document.removeEventListener('mousedown', this.listenerMouseDown);\n      }\n\n      window.removeEventListener('resize', this.listenerResize);\n\n      if (!this.cdRef['destroyed']) {\n        this.cdRef.detectChanges();\n      }\n    }\n  }\n\n  private updateColorPicker(emit: boolean = true, update: boolean = true): void {\n    if (this.sliderDimMax) {\n      if (this.cpColorMode === 2) {\n        this.hsva.s = 0;\n      }\n\n      const lastOutput = this.outputColor;\n\n      const hsla = this.service.hsva2hsla(this.hsva);\n      const rgba = this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva));\n\n      const hue = this.service.denormalizeRGBA(this.service.hsvaToRgba(new Hsva(this.sliderH || this.hsva.h, 1, 1, 1)));\n\n      if (update) {\n        this.hslaText = new Hsla(Math.round((hsla.h) * 360), Math.round(hsla.s * 100), Math.round(hsla.l * 100),\n          Math.round(hsla.a * 100) / 100);\n\n        this.rgbaText = new Rgba(rgba.r, rgba.g, rgba.b, Math.round(rgba.a * 100) / 100);\n\n        const allowHex8 = this.cpAlphaChannel === 'always';\n\n        this.hexText = this.service.rgbaToHex(rgba, allowHex8);\n        this.hexAlpha = this.rgbaText.a;\n      }\n\n      if (this.cpOutputFormat === 'auto') {\n        if (this.hsva.a < 1) {\n          this.format = this.hsva.a < 1 ? ColorFormats.RGBA : ColorFormats.HEX;\n        }\n      }\n\n      this.hueSliderColor = 'rgb(' + hue.r + ',' + hue.g + ',' + hue.b + ')';\n      this.alphaSliderColor = 'rgb(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ')';\n\n      this.outputColor = this.service.outputFormat(this.hsva, this.cpOutputFormat, this.cpAlphaChannel);\n      this.selectedColor = this.service.outputFormat(this.hsva, 'rgba', null);\n\n      this.slider = new SliderPosition(\n        (this.sliderH || this.hsva.h) * this.sliderDimMax.h - 8,\n        this.hsva.s * this.sliderDimMax.s - 8,\n        (1 - this.hsva.v) * this.sliderDimMax.v - 8,\n        this.hsva.a * this.sliderDimMax.a - 8\n      );\n\n      if (emit && lastOutput !== this.outputColor) {\n        this.directiveInstance.colorChanged(this.outputColor);\n      }\n    }\n  }\n\n  // Private helper functions for the color picker dialog positioning\n\n  private setDialogPosition(): void {\n    if (this.cpDialogDisplay === 'inline') {\n      this.position = 'relative';\n    } else {\n      let position = 'static', transform = '', style;\n\n      let parentNode: any = null, transformNode: any = null;\n\n      let node = this.directiveElementRef.nativeElement.parentNode;\n\n      const dialogHeight = this.dialogElement.nativeElement.offsetHeight;\n\n      while (node !== null && node.tagName !== 'HTML') {\n        style = window.getComputedStyle(node);\n        position = style.getPropertyValue('position');\n        transform = style.getPropertyValue('transform');\n\n        if (position !== 'static' && parentNode === null) {\n          parentNode = node;\n        }\n\n        if (transform && transform !== 'none' && transformNode === null) {\n          transformNode = node;\n        }\n\n        if (position === 'fixed') {\n          parentNode = transformNode;\n\n          break;\n        }\n\n        node = node.parentNode;\n      }\n\n      const boxDirective = this.createDialogBox(this.directiveElementRef.nativeElement, (position !== 'fixed'));\n\n      if (this.useRootViewContainer || (position === 'fixed' &&\n         (!parentNode || parentNode instanceof HTMLUnknownElement)))\n      {\n        this.top = boxDirective.top;\n        this.left = boxDirective.left;\n      } else {\n        if (parentNode === null) {\n          parentNode = node;\n        }\n\n        const boxParent = this.createDialogBox(parentNode, (position !== 'fixed'));\n\n        this.top = boxDirective.top - boxParent.top;\n        this.left = boxDirective.left - boxParent.left;\n      }\n\n      if (position === 'fixed') {\n        this.position = 'fixed';\n      }\n\n      if (this.cpPosition === 'left') {\n        this.top += boxDirective.height * this.cpPositionOffset / 100 - this.dialogArrowOffset;\n        this.left -= this.cpWidth + this.dialogArrowSize - 2;\n      } else if (this.cpPosition === 'top') {\n        this.arrowTop = dialogHeight - 1;\n\n        this.top -= dialogHeight + this.dialogArrowSize;\n        this.left += this.cpPositionOffset / 100 * boxDirective.width - this.dialogArrowOffset;\n      } else if (this.cpPosition === 'bottom') {\n        this.top += boxDirective.height + this.dialogArrowSize;\n        this.left += this.cpPositionOffset / 100 * boxDirective.width - this.dialogArrowOffset;\n      } else {\n        this.top += boxDirective.height * this.cpPositionOffset / 100 - this.dialogArrowOffset;\n        this.left += boxDirective.width + this.dialogArrowSize - 2;\n      }\n    }\n  }\n\n  // Private helper functions for the color picker dialog positioning and opening\n\n  private isDescendant(parent: any, child: any): boolean {\n    let node: any = child.parentNode;\n\n    while (node !== null) {\n      if (node === parent) {\n        return true;\n      }\n\n      node = node.parentNode;\n    }\n\n    return false;\n  }\n\n  private createDialogBox(element: any, offset: boolean): any {\n    return {\n      top: element.getBoundingClientRect().top + (offset ? window.pageYOffset : 0),\n      left: element.getBoundingClientRect().left + (offset ? window.pageXOffset : 0),\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    };\n  }\n}\n","import { Directive, OnChanges, OnDestroy, Input, Output, EventEmitter,\n  HostListener, ApplicationRef, ComponentRef, ElementRef, ViewContainerRef,\n  Injector, ReflectiveInjector, ComponentFactoryResolver } from '@angular/core';\n\nimport { ColorPickerService } from './color-picker.service';\nimport { ColorPickerComponent } from './color-picker.component';\n\nimport { AlphaChannel, ColorMode, OutputFormat } from './helpers';\n\n@Directive({\n  selector: '[colorPicker]',\n  exportAs: 'ngxColorPicker'\n})\nexport class ColorPickerDirective implements OnChanges, OnDestroy {\n  private dialog: any;\n\n  private dialogCreated: boolean = false;\n  private ignoreChanges: boolean = false;\n\n  private cmpRef: ComponentRef<ColorPickerComponent>;\n\n  @Input() colorPicker: string;\n\n  @Input() cpWidth: string = '230px';\n  @Input() cpHeight: string = 'auto';\n\n  @Input() cpToggle: boolean = false;\n  @Input() cpDisabled: boolean = false;\n\n  @Input() cpIgnoredElements: any = [];\n\n  @Input() cpFallbackColor: string = '';\n\n  @Input() cpColorMode: ColorMode = 'color';\n\n  @Input() cpOutputFormat: OutputFormat = 'auto';\n  @Input() cpAlphaChannel: AlphaChannel = 'enabled';\n\n  @Input() cpDisableInput: boolean = false;\n\n  @Input() cpDialogDisplay: string = 'popup';\n\n  @Input() cpSaveClickOutside: boolean = true;\n\n  @Input() cpUseRootViewContainer: boolean = false;\n\n  @Input() cpPosition: string = 'right';\n  @Input() cpPositionOffset: string = '0%';\n  @Input() cpPositionRelativeToArrow: boolean = false;\n\n  @Input() cpOKButton: boolean = false;\n  @Input() cpOKButtonText: string = 'OK';\n  @Input() cpOKButtonClass: string = 'cp-ok-button-class';\n\n  @Input() cpCancelButton: boolean = false;\n  @Input() cpCancelButtonText: string = 'Cancel';\n  @Input() cpCancelButtonClass: string = 'cp-cancel-button-class';\n\n  @Input() cpPresetLabel: string = 'Preset colors';\n  @Input() cpPresetColors: string[];\n  @Input() cpMaxPresetColorsLength: number = 6;\n\n  @Input() cpPresetEmptyMessage: string = 'No colors added';\n  @Input() cpPresetEmptyMessageClass: string = 'preset-empty-message';\n\n  @Input() cpAddColorButton: boolean = false;\n  @Input() cpAddColorButtonText: string = 'Add color';\n  @Input() cpAddColorButtonClass: string = 'cp-add-color-button-class';\n\n  @Input() cpRemoveColorButtonClass: string = 'cp-remove-color-button-class';\n\n  @Output() cpInputChange = new EventEmitter<any>(true);\n\n  @Output() cpToggleChange = new EventEmitter<boolean>(true);\n\n  @Output() cpSliderChange = new EventEmitter<any>(true);\n  @Output() cpSliderDragEnd = new EventEmitter<string>(true);\n  @Output() cpSliderDragStart = new EventEmitter<string>(true);\n\n  @Output() colorPickerOpen = new EventEmitter<string>(true);\n  @Output() colorPickerClose = new EventEmitter<string>(true);\n\n  @Output() colorPickerCancel = new EventEmitter<string>(true);\n  @Output() colorPickerSelect = new EventEmitter<string>(true);\n  @Output() colorPickerChange = new EventEmitter<string>(false);\n\n  @Output() cpPresetColorsChange = new EventEmitter<any>(true);\n\n  @HostListener('click') handleClick(): void {\n    this.inputFocus();\n  }\n\n  @HostListener('focus') handleFocus(): void {\n    this.inputFocus();\n  }\n\n  @HostListener('input', ['$event']) handleInput(event: any): void {\n    this.inputChange(event);\n  }\n\n  constructor(private injector: Injector, private cfr: ComponentFactoryResolver,\n    private appRef: ApplicationRef, private vcRef: ViewContainerRef, private elRef: ElementRef,\n    private _service: ColorPickerService) {}\n\n  ngOnDestroy(): void {\n    if (this.cmpRef !== undefined) {\n      this.cmpRef.destroy();\n    }\n  }\n\n  ngOnChanges(changes: any): void {\n    if (changes.cpToggle && !this.cpDisabled) {\n      if (changes.cpToggle.currentValue) {\n        this.openDialog();\n      } else if (!changes.cpToggle.currentValue) {\n        this.closeDialog();\n      }\n    }\n\n    if (changes.colorPicker) {\n      if (this.dialog && !this.ignoreChanges) {\n        if (this.cpDialogDisplay === 'inline') {\n          this.dialog.setInitialColor(changes.colorPicker.currentValue);\n        }\n\n        this.dialog.setColorFromString(changes.colorPicker.currentValue, false);\n\n        if (this.cpUseRootViewContainer && this.cpDialogDisplay !== 'inline') {\n          this.cmpRef.changeDetectorRef.detectChanges();\n        }\n      }\n\n      this.ignoreChanges = false;\n    }\n\n    if (changes.cpPresetLabel || changes.cpPresetColors) {\n      if (this.dialog) {\n        this.dialog.setPresetConfig(this.cpPresetLabel, this.cpPresetColors);\n      }\n    }\n  }\n\n  public openDialog(): void {\n    if (!this.dialogCreated) {\n      let vcRef = this.vcRef;\n\n      this.dialogCreated = true;\n\n      if (this.cpUseRootViewContainer && this.cpDialogDisplay !== 'inline') {\n        const classOfRootComponent = this.appRef.componentTypes[0];\n        const appInstance = this.injector.get(classOfRootComponent);\n\n        vcRef = appInstance.vcRef || appInstance.viewContainerRef || this.vcRef;\n\n        if (vcRef === this.vcRef) {\n          console.warn('You are using cpUseRootViewContainer, ' +\n            'but the root component is not exposing viewContainerRef!' +\n            'Please expose it by adding \\'public vcRef: ViewContainerRef\\' to the constructor.');\n        }\n      }\n\n      const compFactory = this.cfr.resolveComponentFactory(ColorPickerComponent);\n      const injector = ReflectiveInjector.fromResolvedProviders([], vcRef.parentInjector);\n\n      this.cmpRef = vcRef.createComponent(compFactory, 0, injector, []);\n\n      this.cmpRef.instance.setupDialog(this, this.elRef, this.colorPicker,\n        this.cpWidth, this.cpHeight, this.cpDialogDisplay, this.cpFallbackColor,\n        this.cpColorMode, this.cpAlphaChannel, this.cpOutputFormat, this.cpDisableInput,\n        this.cpIgnoredElements, this.cpSaveClickOutside, this.cpUseRootViewContainer,\n        this.cpPosition, this.cpPositionOffset, this.cpPositionRelativeToArrow,\n        this.cpPresetLabel, this.cpPresetColors, this.cpMaxPresetColorsLength,\n        this.cpPresetEmptyMessage, this.cpPresetEmptyMessageClass,\n        this.cpOKButton, this.cpOKButtonClass, this.cpOKButtonText,\n        this.cpCancelButton, this.cpCancelButtonClass, this.cpCancelButtonText,\n        this.cpAddColorButton, this.cpAddColorButtonClass, this.cpAddColorButtonText,\n        this.cpRemoveColorButtonClass);\n\n      this.dialog = this.cmpRef.instance;\n\n      if (this.vcRef !== vcRef) {\n        this.cmpRef.changeDetectorRef.detectChanges();\n      }\n    } else if (this.dialog) {\n      this.dialog.openDialog(this.colorPicker);\n    }\n  }\n\n  public closeDialog(): void {\n    if (this.dialog && this.cpDialogDisplay === 'popup') {\n      this.dialog.closeDialog();\n    }\n  }\n\n  public stateChanged(state: boolean): void {\n    this.cpToggleChange.emit(state);\n\n    if (state) {\n      this.colorPickerOpen.emit(this.colorPicker);\n    } else {\n      this.colorPickerClose.emit(this.colorPicker);\n    }\n  }\n\n  public colorChanged(value: string, ignore: boolean = true): void {\n    this.ignoreChanges = ignore;\n\n    this.colorPickerChange.emit(value);\n  }\n\n  public colorCanceled(): void {\n    this.colorPickerCancel.emit();\n  }\n\n  public colorSelected(value: string): void {\n    this.colorPickerSelect.emit(value);\n  }\n\n  public inputFocus(): void {\n    const element = this.elRef.nativeElement;\n\n    const ignored = this.cpIgnoredElements.filter((item: any) => item === element);\n\n    if (!this.cpDisabled && !ignored.length) {\n      if (typeof document !== 'undefined' && element === document.activeElement) {\n        this.openDialog();\n      } else if (!this.dialog || !this.dialog.show) {\n        this.openDialog();\n      } else {\n        this.closeDialog();\n      }\n    }\n  }\n\n  public inputChange(event: any): void {\n    if (this.dialog) {\n      this.dialog.setColorFromString(event.target.value, true);\n    } else {\n      this.colorPicker = event.target.value;\n\n      this.colorPickerChange.emit(this.colorPicker);\n    }\n  }\n\n  public inputChanged(event: any): void {\n    this.cpInputChange.emit(event);\n  }\n\n  public sliderChanged(event: any): void {\n    this.cpSliderChange.emit(event);\n  }\n\n  public sliderDragEnd(event: any): void {\n    this.cpSliderDragEnd.emit(event);\n  }\n\n  public sliderDragStart(event: any): void {\n    this.cpSliderDragStart.emit(event);\n  }\n\n  public presetColorsChanged(value: any[]): void {\n    this.cpPresetColorsChange.emit(value);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { TextDirective, SliderDirective } from './helpers';\n\nimport { ColorPickerService } from './color-picker.service';\nimport { ColorPickerComponent } from './color-picker.component';\nimport { ColorPickerDirective } from './color-picker.directive';\nimport {OverlayModule} from '@angular/cdk/overlay'\n\n@NgModule({\n  imports: [ CommonModule, OverlayModule ],\n  exports: [ ColorPickerDirective ],\n  providers: [ ColorPickerService ],\n  declarations: [ ColorPickerComponent, ColorPickerDirective, TextDirective, SliderDirective ],\n  entryComponents: [ ColorPickerComponent ]\n})\nexport class ColorPickerModule {}\n"]}