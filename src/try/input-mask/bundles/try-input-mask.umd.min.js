!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms")):"function"==typeof define&&define.amd?define("@try/input-mask",["exports","@angular/core","@angular/common","@angular/forms"],t):t(((e=e||self)["try"]=e["try"]||{},e["try"]["input-mask"]={}),e.ng.core,e.ng.common,e.ng.forms)}(this,function(e,t,r,i){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var s=function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function a(e,t,r,i){var n,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(a=(s<3?n(a):s>3?n(t,r,a):n(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}function o(e,t){return function(r,i){t(r,i,e)}}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t){var r,i,n,s,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(n=2&s[0]?i["return"]:s[0]?i["throw"]||((n=i["return"])&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){a.label=s[1];break}if(6===s[0]&&a.label<n[1]){a.label=n[1],n=s;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(s);break}n[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(o){s=[6,o],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(o){n={error:o}}finally{try{i&&!i.done&&(r=s["return"])&&r.call(s)}finally{if(n)throw n.error}}return a}var l=new t.InjectionToken("config"),u=new t.InjectionToken("NEW_CONFIG"),f=new t.InjectionToken("INITIAL_CONFIG"),m={sufix:"",prefix:"",clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,dropSpecialCharacters:!0,shownMaskExpression:"",specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},d=function(){function e(e){this._config=e,this.maskExpression="",this.shownMaskExpression="",this.separator=function(e,t,r,i){for(var n=(e+="").split(r),s=n.length>1?""+r+n[1]:"",a=n[0],o=/(\d+)(\d{3})/;o.test(a);)a=a.replace(o,"$1"+t+"$2");return i===undefined?a+s:0===i?a:a+s.substr(0,i+1)},this.percentage=function(e){return Number(e)>=0&&Number(e)<=100},this.getPrecision=function(e){var t=e.split(".");return t.length>1?Number(t[t.length-1]):Infinity},this.checkInputPrecision=function(e,t,r){if(t<Infinity){var i=void 0;i="."===r?new RegExp("\\.\\d{"+t+"}.*$"):new RegExp(",\\d{"+t+"}.*$");var n=e.match(i);n&&n[0].length-1>t?e=e.substring(0,e.length-1):0===t&&e.endsWith(r)&&(e=e.substring(0,e.length-1))}return e},this._shift=new Set,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.sufix=this._config.sufix}return e.prototype.applyMaskWithPattern=function(e,t){var r=h(t,2),i=r[0],n=r[1];return this.customPattern=n,this.applyMask(e,i)},e.prototype.applyMask=function(e,t,r,i){if(void 0===r&&(r=0),void 0===i&&(i=function(){}),e===undefined||null===e||t===undefined)return"";var n=0,s="",a=!1;e.slice(0,this.prefix.length)===this.prefix&&(e=e.slice(this.prefix.length,e.length));var o=e.toString().split("");if("percent"===t)(e.match("[a-z]|[A-Z]")||e.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/]/))&&(e=e.substring(0,e.length-1)),s=this.percentage(e)?e:e.substring(0,e.length-1);else if("separator"===t||"dot_separator"===t||t.startsWith("dot_separator")||"coma_separator"===t||t.startsWith("coma_separator")){(e.match("[a-z]|[A-Z]")||e.match(/[@#!$%^&*()_+|~=`{}\[\]:";<>?\/]/))&&(e=e.substring(0,e.length-1));var p=this.getPrecision(t),c=void 0;"separator"===t?(e.includes(",")&&e.endsWith(",")&&e.indexOf(",")!==e.lastIndexOf(",")&&(e=e.substring(0,e.length-1)),(e.match("[a-z]|[A-Z]")||e.match(/[@#!$%^&*()_+|~=`{}\[\]:.";<>?\/]/))&&(e=e.substring(0,e.length-1)),c=e.replace(/\s/g,""),s=this.separator(c," ",".",p)):"dot_separator"===t||t.startsWith("dot_separator")?((e.match("[a-z]|[A-Z]")||e.match(/[@#!$%^&*()_+|~=`{}\[\]:\s";<>?\/]/))&&(e=e.substring(0,e.length-1)),c=(e=this.checkInputPrecision(e,p,",")).replace(/\./g,""),s=this.separator(c,".",",",p)):("coma_separator"===t||t.startsWith("coma_separator"))&&(c=(e=this.checkInputPrecision(e,p,".")).replace(/\,/g,""),s=this.separator(c,",",".",p)),n=r=s.length+1;var h=/\*|\?/g.test(t.slice(0,n))?o.length:n;this._shift.add(h+this.prefix.length||0)}else for(var l=0,u=o[0];l<o.length&&n!==t.length;u=o[++l])if(this._checkSymbolMask(u,t[n])&&"?"===t[n+1])s+=u,n+=2;else if("*"===t[n+1]&&a&&this._checkSymbolMask(u,t[n+2]))s+=u,n+=3,a=!1;else if(this._checkSymbolMask(u,t[n])&&"*"===t[n+1])s+=u,a=!0;else if("?"===t[n+1]&&this._checkSymbolMask(u,t[n+2]))s+=u,n+=3;else if(this._checkSymbolMask(u,t[n])){if("H"===t[n]&&Number(u)>2){s+=0,n+=1;h=/\*|\?/g.test(t.slice(0,n))?o.length:n;this._shift.add(h+this.prefix.length||0),l--;continue}if("h"===t[n]&&"2"===s&&Number(u)>3)continue;if("m"===t[n]&&Number(u)>5){s+=0,n+=1;h=/\*|\?/g.test(t.slice(0,n))?o.length:n;this._shift.add(h+this.prefix.length||0),l--;continue}if("s"===t[n]&&Number(u)>5){s+=0,n+=1;h=/\*|\?/g.test(t.slice(0,n))?o.length:n;this._shift.add(h+this.prefix.length||0),l--;continue}if("d"===t[n]&&Number(u)>3){s+=0,n+=1;h=/\*|\?/g.test(t.slice(0,n))?o.length:n;this._shift.add(h+this.prefix.length||0),l--;continue}if("d"===t[n-1]&&Number(e.slice(n-1,n+1))>31)continue;if("m"===t[n]&&Number(u)>1){s+=0,n+=1;h=/\*|\?/g.test(t.slice(0,n))?o.length:n;this._shift.add(h+this.prefix.length||0),l--;continue}if("m"===t[n-1]&&Number(e.slice(n-1,n+1))>12)continue;s+=u,n++}else if(-1!==this.maskSpecialCharacters.indexOf(t[n])){s+=t[n],n++;h=/\*|\?/g.test(t.slice(0,n))?o.length:n;this._shift.add(h+this.prefix.length||0),l--}else this.maskSpecialCharacters.indexOf(u)>-1&&this.maskAvailablePatterns[t[n]]&&this.maskAvailablePatterns[t[n]].optional?(n++,l--):"*"===this.maskExpression[n+1]&&this._findSpecialChar(this.maskExpression[n+2])&&this._findSpecialChar(u)===this.maskExpression[n+2]&&a&&(n+=3,s+=u);s.length+1===t.length&&-1!==this.maskSpecialCharacters.indexOf(t[t.length-1])&&(s+=t[t.length-1]);for(var f=1,m=r+1;this._shift.has(m);)f++,m++;i(this._shift.has(r)?f:0);var d=""+this.prefix+s;return d=this.sufix?""+this.prefix+s+this.sufix:""+this.prefix+s,0===s.length&&(d=""+this.prefix+s),d},e.prototype._findSpecialChar=function(e){return this.maskSpecialCharacters.find(function(t){return t===e})},e.prototype._checkSymbolMask=function(e,t){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[t]&&this.maskAvailablePatterns[t].pattern&&this.maskAvailablePatterns[t].pattern.test(e)},e=a([t.Injectable(),o(0,t.Inject(l)),p("design:paramtypes",[Object])],e)}(),y=function(e){function i(t,r,i,n){var s=e.call(this,r)||this;return s.document=t,s._config=r,s._elementRef=i,s._renderer=n,s.maskExpression="",s.isNumberValue=!1,s.showMaskTyped=!1,s.maskIsShown="",s.onChange=function(e){},s.onTouch=function(){},s._formElement=s._elementRef.nativeElement,s}return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(i,e),i.prototype.applyMask=function(t,r,i,n){if(void 0===i&&(i=0),void 0===n&&(n=function(){}),this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"",!t&&this.showMaskTyped)return this.prefix+this.maskIsShown;var s=e.prototype.applyMask.call(this,t,r,i,n);"dot_separator.2"===this.maskExpression&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(function(e){return","!==e})),"coma_separator.2"===this.maskExpression&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(function(e){return"."!==e})),Array.isArray(this.dropSpecialCharacters)?this.onChange(this._removeMask(this._removeSufix(this._removePrefix(s)),this.dropSpecialCharacters)):!0===this.dropSpecialCharacters?this.onChange(this.isNumberValue?Number(this._removeMask(this._removeSufix(this._removePrefix(s)),this.maskSpecialCharacters)):this._removeMask(this._removeSufix(this._removePrefix(s)),this.maskSpecialCharacters)):this.onChange(this._removeSufix(this._removePrefix(s)));if(!this.showMaskTyped)return s;var a=s.length;return s+(this.prefix+this.maskIsShown).slice(a)},i.prototype.applyValueChanges=function(e,t){void 0===e&&(e=0),void 0===t&&(t=function(){});var r=this.applyMask(this._formElement.value,this.maskExpression,e,t);this._formElement.value=r,this._formElement!==this.document.activeElement&&this.clearIfNotMatchFn()},i.prototype.showMaskInInput=function(){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}return this.showMaskTyped?this.maskExpression.replace(/\w/g,"_"):""},i.prototype.clearIfNotMatchFn=function(){!0===this.clearIfNotMatch&&this.maskExpression.length!==this._formElement.value.length&&(this.formElementProperty=["value",""],this.applyMask(this._formElement.value,this.maskExpression))},Object.defineProperty(i.prototype,"formElementProperty",{set:function(e){var t=h(e,2),r=t[0],i=t[1];this._renderer.setProperty(this._formElement,r,i)},enumerable:!0,configurable:!0}),i.prototype._removeMask=function(e,t){return e?e.replace(this._regExpForRemove(t),""):e},i.prototype._removePrefix=function(e){return this.prefix&&e?e.replace(this.prefix,""):e},i.prototype._removeSufix=function(e){return this.sufix&&e?e.replace(this.sufix,""):e},i.prototype._regExpForRemove=function(e){return new RegExp(e.map(function(e){return"\\"+e}).join("|"),"gi")},i=a([t.Injectable(),o(0,t.Inject(r.DOCUMENT)),o(1,t.Inject(l)),p("design:paramtypes",[Object,Object,t.ElementRef,t.Renderer2])],i)}(d),g=function(){function e(e,t){this.document=e,this._maskService=t,this._position=null,this.onChange=function(e){},this.onTouch=function(){}}var n;return n=e,Object.defineProperty(e.prototype,"maskExpression",{set:function(e){this._maskValue=e||"",this._maskValue&&(this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specialCharacters",{set:function(e){e&&Array.isArray(e)&&(!Array.isArray(e)||e.length)&&(this._maskService.maskSpecialCharacters=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patterns",{set:function(e){e&&(this._maskService.maskAvailablePatterns=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prefix",{set:function(e){e&&(this._maskService.prefix=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sufix",{set:function(e){e&&(this._maskService.sufix=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropSpecialCharacters",{set:function(e){this._maskService.dropSpecialCharacters=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showMaskTyped",{set:function(e){e&&(this._maskService.showMaskTyped=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shownMaskExpression",{set:function(e){e&&(this._maskService.shownMaskExpression=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTemplate",{set:function(e){this._maskService.showTemplate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clearIfNotMatch",{set:function(e){this._maskService.clearIfNotMatch=e},enumerable:!0,configurable:!0}),e.prototype.onInput=function(e){var t=e.target;if(this._inputValue=t.value,this._maskValue){var r=1===t.selectionStart?t.selectionStart+this._maskService.prefix.length:t.selectionStart,i=0;this._maskService.applyValueChanges(r,function(e){return i=e}),this.document.activeElement===t&&(t.selectionStart=t.selectionEnd=null!==this._position?this._position:r+("deleteContentBackward"===e.inputType?0:i),this._position=null)}else this.onChange(t.value)},e.prototype.onBlur=function(){this._maskService.clearIfNotMatchFn(),this.onTouch()},e.prototype.onFocus=function(e){var t=e.target;null!==t&&null!==t.selectionStart&&t.selectionStart===t.selectionEnd&&t.selectionStart>this._maskService.prefix.length&&38!==e.keyCode||(this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput()),t.value=t.value&&t.value!==this._maskService.prefix?t.value:this._maskService.prefix+this._maskService.maskIsShown,(t.selectionStart||t.selectionEnd)<=this._maskService.prefix.length&&(t.selectionStart=this._maskService.prefix.length))},e.prototype.a=function(e){var t=e.target;38===e.keyCode&&e.preventDefault(),37!==e.keyCode&&8!==e.keyCode||(t.selectionStart<=this._maskService.prefix.length&&t.selectionEnd<=this._maskService.prefix.length&&e.preventDefault(),this.onFocus(e),8===e.keyCode&&0===t.selectionStart&&t.selectionEnd===t.value.length&&(t.value=this._maskService.prefix,this._position=this._maskService.prefix?this._maskService.prefix.length:1,this.onInput(e)))},e.prototype.onPaste=function(){this._position=Number.MAX_SAFE_INTEGER},e.prototype.writeValue=function(e){return t=this,r=void 0,n=function(){return c(this,function(t){return e===undefined&&(e=""),"number"==typeof e&&(e=String(e),this._maskService.isNumberValue=!0),e&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?this._maskService.formElementProperty=["value",this._maskService.applyMask(e,this._maskService.maskExpression)]:this._maskService.formElementProperty=["value",e],this._inputValue=e,[2]})},new((i=void 0)||(i=Promise))(function(e,s){function a(e){try{p(n.next(e))}catch(t){s(t)}}function o(e){try{p(n["throw"](e))}catch(t){s(t)}}function p(t){t.done?e(t.value):new i(function(e){e(t.value)}).then(a,o)}p((n=n.apply(t,r||[])).next())});var t,r,i,n},e.prototype.registerOnChange=function(e){this.onChange=e,this._maskService.onChange=this.onChange},e.prototype.registerOnTouched=function(e){this.onTouch=e},e.prototype.setDisabledState=function(e){this._maskService.formElementProperty=["disabled",e]},e.prototype._repeatPatternSymbols=function(e){var t=this;return e.match(/{[0-9]+}/)&&e.split("").reduce(function(r,i,n){if(t._start="{"===i?n:t._start,"}"!==i)return t._maskService._findSpecialChar(i)?r+i:r;t._end=n;var s=Number(e.slice(t._start+1,t._end));return r+new Array(s+1).join(e[t._start-1])},"")||e},a([t.Input("mask"),p("design:type",String),p("design:paramtypes",[String])],e.prototype,"maskExpression",null),a([t.Input(),p("design:type",Object),p("design:paramtypes",[Object])],e.prototype,"specialCharacters",null),a([t.Input(),p("design:type",Object),p("design:paramtypes",[Object])],e.prototype,"patterns",null),a([t.Input(),p("design:type",Object),p("design:paramtypes",[Object])],e.prototype,"prefix",null),a([t.Input(),p("design:type",Object),p("design:paramtypes",[Object])],e.prototype,"sufix",null),a([t.Input(),p("design:type",Object),p("design:paramtypes",[Object])],e.prototype,"dropSpecialCharacters",null),a([t.Input(),p("design:type",Object),p("design:paramtypes",[Object])],e.prototype,"showMaskTyped",null),a([t.Input(),p("design:type",Object),p("design:paramtypes",[Object])],e.prototype,"shownMaskExpression",null),a([t.Input(),p("design:type",Object),p("design:paramtypes",[Object])],e.prototype,"showTemplate",null),a([t.Input(),p("design:type",Object),p("design:paramtypes",[Object])],e.prototype,"clearIfNotMatch",null),a([t.HostListener("input",["$event"]),p("design:type",Function),p("design:paramtypes",[KeyboardEvent]),p("design:returntype",void 0)],e.prototype,"onInput",null),a([t.HostListener("blur"),p("design:type",Function),p("design:paramtypes",[]),p("design:returntype",void 0)],e.prototype,"onBlur",null),a([t.HostListener("click",["$event"]),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e.prototype,"onFocus",null),a([t.HostListener("keydown",["$event"]),p("design:type",Function),p("design:paramtypes",[KeyboardEvent]),p("design:returntype",void 0)],e.prototype,"a",null),a([t.HostListener("paste"),p("design:type",Function),p("design:paramtypes",[]),p("design:returntype",void 0)],e.prototype,"onPaste",null),e=n=a([t.Directive({selector:"[mask]",providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return n}),multi:!0},y]}),o(0,t.Inject(r.DOCUMENT)),p("design:paramtypes",[Object,y])],e)}(),k=function(){function e(e){this._maskService=e}return e.prototype.transform=function(e,t){return e?"string"==typeof t?this._maskService.applyMask(""+e,t):this._maskService.applyMaskWithPattern(""+e,t):""},e=a([t.Pipe({name:"mask",pure:!0}),p("design:paramtypes",[d])],e)}(),v=function(){function e(){}var r;return r=e,e.forRoot=function(e){return{ngModule:r,providers:[{provide:u,useValue:e},{provide:f,useValue:m},{provide:l,useFactory:_,deps:[f,u]}]}},e.forChild=function(e){return{ngModule:r}},e=r=a([t.NgModule({providers:[d],exports:[g,k],declarations:[g,k]})],e)}();function _(e,t){return"function"==typeof t?t():s({},e,t)}e.MaskApplierService=d,e.MaskDirective=g,e.MaskModule=v,e.MaskPipe=k,e.MaskService=y,e._configFactory=_,e.ɵb=l,e.ɵc=u,e.ɵd=f,e.ɵe=m,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=try-input-mask.umd.min.js.map