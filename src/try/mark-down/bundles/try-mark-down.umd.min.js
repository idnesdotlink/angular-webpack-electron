!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("@angular/platform-browser"),require("marked"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@try/mark-down",["exports","@angular/core","@angular/common","@angular/common/http","@angular/platform-browser","marked","rxjs/operators"],t):t(((e=e||self)["try"]=e["try"]||{},e["try"]["mark-down"]={}),e.ng.core,e.ng.common,e.ng.common.http,e.ng.platformBrowser,e.marked,e.rxjs.operators)}(this,function(e,t,n,r,i,o,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function l(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var h,d=function(){function e(){}return e.prototype.transform=function(e,t){return"string"!=typeof e?(console.error("LanguagePipe has been invoked with an invalid value type ["+e+"]"),e):"string"!=typeof t?(console.error("LanguagePipe has been invoked with an invalid parameter ["+t+"]"),e):"```"+t+"\n"+e+"\n```"},e=l([t.Pipe({name:"language"})],e)}(),m=function(){return function(){}}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(o.Renderer),y="[ngx-markdown] When using the [src] attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",v=function(){function e(e,t,n,r){this.platform=e,this.http=t,this.domSanitizer=n,this.options=r}return Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){this._options=Object.assign({},{renderer:new g},this._options,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this.options.renderer},set:function(e){this.options.renderer=e},enumerable:!0,configurable:!0}),e.prototype.compile=function(e,n,r){void 0===n&&(n=!1),void 0===r&&(r=this.options);var i=this.precompile(e),a=o.parse(n?this.decodeHtml(i):i,r);return r.sanitize&&!r.sanitizer?this.domSanitizer.sanitize(t.SecurityContext.HTML,a):a},e.prototype.getSource=function(e){var t=this;if(!this.http)throw new Error(y);return this.http.get(e,{responseType:"text"}).pipe(a.map(function(n){return t.handleExtension(e,n)}))},e.prototype.highlight=function(e){n.isPlatformBrowser(this.platform)&&"undefined"!=typeof Prism&&(e||(e=document),e.querySelectorAll('pre code:not([class*="language-"])').forEach(function(e){return e.classList.add("language-none")}),Prism.highlightAllUnder(e))},e.prototype.decodeHtml=function(e){if(n.isPlatformBrowser(this.platform)){var t=document.createElement("textarea");return t.innerHTML=e,t.value}return e},e.prototype.handleExtension=function(e,t){var n=e?e.split("?")[0].split(".").splice(-1).join():null;return"md"!==n?"```"+n+"\n"+t+"\n```":t},e.prototype.precompile=function(e){return e?e.split("\n").map(function(e){var n=t;return e.length>0&&(n=isNaN(n)?e.search(/\S|$/):Math.min(e.search(/\S|$/),n)),isNaN(t)&&(t=n),n?e.substring(n):e}).join("\n"):"";var t},e=l([t.Injectable(),u(0,t.Inject(t.PLATFORM_ID)),u(1,t.Optional()),p("design:paramtypes",[Object,r.HttpClient,i.DomSanitizer,m])],e)}();(h=e.PrismPlugin||(e.PrismPlugin={})).LineHighlight="line-highlight",h.LineNumbers="line-numbers";var b=function(){function n(e,n){this.element=e,this.markdownService=n,this.error=new t.EventEmitter,this.load=new t.EventEmitter,this._lineHighlight=!1,this._lineNumbers=!1}return Object.defineProperty(n.prototype,"lineNumbers",{get:function(){return this._lineNumbers},set:function(e){this._lineNumbers=this.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineHighlight",{get:function(){return this._lineHighlight},set:function(e){this._lineHighlight=this.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),n.prototype.ngOnChanges=function(){this.data?this.handleData():this.src&&this.handleSrc()},n.prototype.ngAfterViewInit=function(){this.data||this.src||this.handleTransclusion()},n.prototype.render=function(e,t){void 0===t&&(t=!1),this.element.nativeElement.innerHTML=this.markdownService.compile(e,t),this.handlePlugins(),this.markdownService.highlight(this.element.nativeElement)},n.prototype.coerceBooleanProperty=function(e){return null!=e&&""+e!="false"},n.prototype.handleData=function(){this.render(this.data)},n.prototype.handleSrc=function(){var e=this;this.markdownService.getSource(this.src).subscribe(function(t){e.render(t),e.load.emit(t)},function(t){return e.error.emit(t)})},n.prototype.handleTransclusion=function(){this.render(this.element.nativeElement.innerHTML,!0)},n.prototype.handlePlugins=function(){this.lineHighlight&&(this.setPluginClass(this.element.nativeElement,e.PrismPlugin.LineHighlight),this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset})),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,e.PrismPlugin.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))},n.prototype.setPluginClass=function(e,t){for(var n,r=e.querySelectorAll("pre"),i=0;i<r.length;i++){var o=t instanceof Array?t:[t];(n=r.item(i).classList).add.apply(n,f(o))}},n.prototype.setPluginOptions=function(e,t){for(var n=this,r=e.querySelectorAll("pre"),i=function(e){Object.keys(t).forEach(function(i){var o=t[i];if(o){var a=n.toLispCase(i);r.item(e).setAttribute(a,o.toString())}})},o=0;o<r.length;o++)i(o)},n.prototype.toLispCase=function(e){var t=e.match(/([A-Z])/g);if(!t)return e;for(var n=e.toString(),r=0,i=t.length;r<i;r++)n=n.replace(new RegExp(t[r]),"-"+t[r].toLowerCase());return"-"===n.slice(0,1)&&(n=n.slice(1)),n},l([t.Input(),p("design:type",String)],n.prototype,"data",void 0),l([t.Input(),p("design:type",String)],n.prototype,"src",void 0),l([t.Input(),p("design:type",Boolean),p("design:paramtypes",[Boolean])],n.prototype,"lineNumbers",null),l([t.Input(),p("design:type",Number)],n.prototype,"start",void 0),l([t.Input(),p("design:type",Boolean),p("design:paramtypes",[Boolean])],n.prototype,"lineHighlight",null),l([t.Input(),p("design:type",Object)],n.prototype,"line",void 0),l([t.Input(),p("design:type",Number)],n.prototype,"lineOffset",void 0),l([t.Output(),p("design:type",Object)],n.prototype,"error",void 0),l([t.Output(),p("design:type",Object)],n.prototype,"load",void 0),n=l([t.Component({selector:"markdown, [markdown]",template:"<ng-content></ng-content>"}),p("design:paramtypes",[t.ElementRef,v])],n)}(),P=function(){function e(e,t,n){this.elementRef=e,this.markdownService=t,this.zone=n}return e.prototype.transform=function(e){var t=this;if(null==e)return"";if("string"!=typeof e)return console.error("MarkdownPipe has been invoked with an invalid value type ["+e+"]"),e;var n=this.markdownService.compile(e);return this.zone.onStable.pipe(a.first()).subscribe(function(){return t.markdownService.highlight(t.elementRef.nativeElement)}),n},e=l([t.Pipe({name:"markdown"}),p("design:paramtypes",[t.ElementRef,v,t.NgZone])],e)}(),w={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1},O={provide:m,useValue:w},S=[d,b,P],k=function(){function e(){}var n;return n=e,e.forRoot=function(e){return{ngModule:n,providers:f([v],e?[e.loader||[],e.markedOptions||O]:[O])}},e.forChild=function(){return{ngModule:n}},e=n=l([t.NgModule({exports:f(S),declarations:f(S)})],e)}();e.LanguagePipe=d,e.MarkdownComponent=b,e.MarkdownModule=k,e.MarkdownPipe=P,e.MarkdownService=v,e.MarkedOptions=m,e.MarkedRenderer=g,e.errorSrcWithoutHttpClient=y,e.initialMarkedOptions=O,e.Éµ0=w,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=try-mark-down.umd.min.js.map