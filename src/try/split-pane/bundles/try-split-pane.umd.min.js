!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/platform-browser"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@try/split-pane",["exports","@angular/core","@angular/common","@angular/platform-browser","rxjs","rxjs/operators"],t):t(((e=e||self)["try"]=e["try"]||{},e["try"]["split-pane"]={}),e.ng.core,e.ng.common,e.ng.platformBrowser,e.rxjs,e.rxjs.operators)}(this,function(e,t,i,r,n,s){"use strict";function o(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o}function a(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,s=i.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(i=s["return"])&&i.call(s)}finally{if(n)throw n.error}}return o}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}function d(e){return e.touches!==undefined&&e.touches.length>0?{x:e.touches[0].clientX,y:e.touches[0].clientY}:e.clientX!==undefined&&e.clientY!==undefined?{x:e.clientX,y:e.clientY}:null}function c(e,t){return e.nativeElement["horizontal"===t?"offsetWidth":"offsetHeight"]}function p(e){return"boolean"==typeof e?e:"false"!==e}function h(e){return e>.999&&e<1.001}var g=function(){function e(e,t,i,r){this.ngZone=e,this.elRef=t,this.cdRef=i,this.renderer=r,this._direction="horizontal",this._gutterSize=11,this._useTransition=!1,this._disabled=!1,this._dir="ltr",this.dragProgressSubject=new n.Subject,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.currentGutterNum=0,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hidedAreas=[],this.dragListeners=[],this.dragStartValues={sizePixelContainer:0,sizePixelA:0,sizePixelB:0,sizePercentA:0,sizePercentB:0},this.direction=this._direction}return Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction="vertical"===e?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,"is-"+this._direction),this.renderer.removeClass(this.elRef.nativeElement,"is-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gutterSize",{get:function(){return this._gutterSize},set:function(e){e=Number(e),this._gutterSize=!isNaN(e)&&e>0?e:11,this.build(!1,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useTransition",{get:function(){return this._useTransition},set:function(e){this._useTransition=p(e),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"is-transition"):this.renderer.removeClass(this.elRef.nativeElement,"is-transition")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=p(e),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"is-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"is-disabled")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dir",{get:function(){return this._dir},set:function(e){e="rtl"===e?"rtl":"ltr",this._dir=e,this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragStart",{get:function(){var e=this;return new n.Observable(function(t){return e.dragStartSubscriber=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragEnd",{get:function(){var e=this;return new n.Observable(function(t){return e.dragEndSubscriber=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gutterClick",{get:function(){var e=this;return new n.Observable(function(t){return e.gutterClickSubscriber=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transitionEnd",{get:function(){var e=this;return new n.Observable(function(t){return e.transitionEndSubscriber=t}).pipe(s.debounceTime(20))},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.ngZone.runOutsideAngular(function(){setTimeout(function(){return e.renderer.addClass(e.elRef.nativeElement,"is-init")})})},e.prototype.getNbGutters=function(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1},e.prototype.addArea=function(e){var t={component:e,order:0,size:0};!0===e.visible?(this.displayedAreas.push(t),this.build(!0,!0)):this.hidedAreas.push(t)},e.prototype.removeArea=function(e){var t;this.displayedAreas.some(function(t){return t.component===e})?(t=this.displayedAreas.find(function(t){return t.component===e}),this.displayedAreas.splice(this.displayedAreas.indexOf(t),1),this.build(!0,!0)):this.hidedAreas.some(function(t){return t.component===e})&&(t=this.hidedAreas.find(function(t){return t.component===e}),this.hidedAreas.splice(this.hidedAreas.indexOf(t),1))},e.prototype.updateArea=function(e,t,i){this.displayedAreas.find(function(t){return t.component===e})&&this.build(t,i)},e.prototype.showArea=function(e){var t,i=this.hidedAreas.find(function(t){return t.component===e});if(i){var r=this.hidedAreas.splice(this.hidedAreas.indexOf(i),1);(t=this.displayedAreas).push.apply(t,u(r)),this.build(!0,!0)}},e.prototype.hideArea=function(e){var t,i=this.displayedAreas.find(function(t){return t.component===e});if(i){var r=this.displayedAreas.splice(this.displayedAreas.indexOf(i),1);r.forEach(function(e){e.order=0,e.size=0}),(t=this.hidedAreas).push.apply(t,u(r)),this.build(!0,!0)}},e.prototype.getVisibleAreaSizes=function(){return this.displayedAreas.map(function(e){return 100*e.size})},e.prototype.setVisibleAreaSizes=function(e){return e.length===this.displayedAreas.length&&(!!h((e=e.map(function(e){return e/100})).reduce(function(e,t){return e+t},0))&&(this.displayedAreas.forEach(function(t,i){t.component._size=e[i]}),this.build(!1,!0),!0))},e.prototype.build=function(e,t){var i=this;if(this.stopDragging(),!0===e&&(this.displayedAreas.every(function(e){return null!==e.component.order})&&this.displayedAreas.sort(function(e,t){return e.component.order-t.component.order}),this.displayedAreas.forEach(function(e,t){e.order=2*t,e.component.setStyleOrder(e.order)})),!0===t){var r=this.displayedAreas.reduce(function(e,t){return t.component.size?e+t.component.size:e},0);if(this.displayedAreas.every(function(e){return null!==e.component.size})&&h(r))this.displayedAreas.forEach(function(e){e.size=e.component.size});else{var n=1/this.displayedAreas.length;this.displayedAreas.forEach(function(e){e.size=n})}}var s=0,o=c(this.elRef,this.direction);if(this.displayedAreas.forEach(function(e){e.size*o<i.gutterSize&&(s+=e.size,e.size=0)}),s>0&&this.displayedAreas.length>0){var a=this.displayedAreas.filter(function(e){return 0!==e.size}).length;if(a>0){var l=s/a;this.displayedAreas.filter(function(e){return 0!==e.size}).forEach(function(e){e.size+=l})}else this.displayedAreas[this.displayedAreas.length-1].size=1}this.refreshStyleSizes(),this.cdRef.markForCheck()},e.prototype.refreshStyleSizes=function(){var e=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(function(t){t.component.setStyleFlexbasis("calc( "+100*t.size+"% - "+t.size*e+"px )")})},e.prototype.clickGutter=function(e,t){e.preventDefault(),e.stopPropagation(),this.startPoint&&this.startPoint.x===e.clientX&&this.startPoint.y===e.clientY&&(this.currentGutterNum=t,this.notify("click"))},e.prototype.startDragging=function(e,t,i){var r=this;if(e.preventDefault(),e.stopPropagation(),this.startPoint=d(e),this.startPoint&&!this.disabled){var n=this.displayedAreas.find(function(e){return e.order===t-1}),s=this.displayedAreas.find(function(e){return e.order===t+1});n&&s&&(this.dragStartValues.sizePixelContainer=c(this.elRef,this.direction),this.dragStartValues.sizePixelA=c(n.component.elRef,this.direction),this.dragStartValues.sizePixelB=c(s.component.elRef,this.direction),this.dragStartValues.sizePercentA=n.size,this.dragStartValues.sizePercentB=s.size,this.currentGutterNum=i,this.ngZone.runOutsideAngular(function(){r.dragListeners.push(r.renderer.listen("document","mouseup",r.stopDragging.bind(r))),r.dragListeners.push(r.renderer.listen("document","touchend",r.stopDragging.bind(r))),r.dragListeners.push(r.renderer.listen("document","touchcancel",r.stopDragging.bind(r))),r.dragListeners.push(r.renderer.listen("document","mousemove",function(e){return r.dragEvent(e,n,s)})),r.dragListeners.push(r.renderer.listen("document","touchmove",function(e){return r.dragEvent(e,n,s)}))}),n.component.lockEvents(),s.component.lockEvents(),this.isDragging=!0,this.renderer.addClass(this.elRef.nativeElement,"is-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.currentGutterNum-1].nativeElement,"is-dragged"),this.notify("start"))}},e.prototype.dragEvent=function(e,t,i){if(e.preventDefault(),e.stopPropagation(),this.isDragging&&(this.endPoint=d(e),this.endPoint)){var r="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&(r=-r);var n=this.dragStartValues.sizePixelA-r,s=this.dragStartValues.sizePixelB+r;n<this.gutterSize&&s<this.gutterSize||(n<this.gutterSize?(s+=n,n=0):s<this.gutterSize&&(n+=s,s=0),0===n?(i.size+=t.size,t.size=0):0===s?(t.size+=i.size,i.size=0):0===this.dragStartValues.sizePercentA?(i.size=this.dragStartValues.sizePercentB/this.dragStartValues.sizePixelB*s,t.size=this.dragStartValues.sizePercentB-i.size):0===this.dragStartValues.sizePercentB?(t.size=this.dragStartValues.sizePercentA/this.dragStartValues.sizePixelA*n,i.size=this.dragStartValues.sizePercentA-t.size):(t.size=this.dragStartValues.sizePercentA/this.dragStartValues.sizePixelA*n,i.size=this.dragStartValues.sizePercentA+this.dragStartValues.sizePercentB-t.size),this.refreshStyleSizes(),this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y||this.notify("progress"))}},e.prototype.stopDragging=function(e){var t=this;if(e&&(e.preventDefault(),e.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(function(e){e.component.unlockEvents()});this.dragListeners.length>0;){var i=this.dragListeners.pop();i&&i()}e&&this.endPoint&&(this.startPoint.x!==this.endPoint.x||this.startPoint.y!==this.endPoint.y)&&this.notify("end"),this.isDragging=!1,this.renderer.removeClass(this.elRef.nativeElement,"is-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.currentGutterNum-1].nativeElement,"is-dragged"),this.ngZone.runOutsideAngular(function(){setTimeout(function(){t.startPoint=null,t.endPoint=null})})}},e.prototype.notify=function(e){var t=this,i=this.displayedAreas.map(function(e){return 100*e.size});"start"===e?this.dragStartSubscriber&&this.ngZone.run(function(){return t.dragStartSubscriber.next({gutterNum:t.currentGutterNum,sizes:i})}):"end"===e?this.dragEndSubscriber&&this.ngZone.run(function(){return t.dragEndSubscriber.next({gutterNum:t.currentGutterNum,sizes:i})}):"click"===e?this.gutterClickSubscriber&&this.ngZone.run(function(){return t.gutterClickSubscriber.next({gutterNum:t.currentGutterNum,sizes:i})}):"transitionEnd"===e?this.transitionEndSubscriber&&this.ngZone.run(function(){return t.transitionEndSubscriber.next(i)}):"progress"===e&&this.dragProgressSubject.next({gutterNum:this.currentGutterNum,sizes:i})},e.prototype.ngOnDestroy=function(){this.stopDragging()},o([t.Input(),a("design:type",String),a("design:paramtypes",[String])],e.prototype,"direction",null),o([t.Input(),a("design:type",Number),a("design:paramtypes",[Number])],e.prototype,"gutterSize",null),o([t.Input(),a("design:type",Boolean),a("design:paramtypes",[Boolean])],e.prototype,"useTransition",null),o([t.Input(),a("design:type",Boolean),a("design:paramtypes",[Boolean])],e.prototype,"disabled",null),o([t.Input(),a("design:type",String),a("design:paramtypes",[String])],e.prototype,"dir",null),o([t.Output(),a("design:type",n.Observable),a("design:paramtypes",[])],e.prototype,"dragStart",null),o([t.Output(),a("design:type",n.Observable),a("design:paramtypes",[])],e.prototype,"dragEnd",null),o([t.Output(),a("design:type",n.Observable),a("design:paramtypes",[])],e.prototype,"gutterClick",null),o([t.Output(),a("design:type",n.Observable),a("design:paramtypes",[])],e.prototype,"transitionEnd",null),o([t.ViewChildren("gutterEls"),a("design:type",t.QueryList)],e.prototype,"gutterEls",void 0),e=o([t.Component({selector:"as-split",changeDetection:t.ChangeDetectionStrategy.OnPush,template:'\n        <ng-content></ng-content>\n        <ng-template ngFor [ngForOf]="displayedAreas" let-index="index" let-last="last">\n            <div *ngIf="last === false"\n                 #gutterEls\n                 class="as-split-gutter"\n                 [style.flex-basis.px]="gutterSize"\n                 [style.order]="index*2+1"\n                 (as-split-undetected.click)="clickGutter($event, index+1)"\n                 (as-split-undetected.mousedown)="startDragging($event, index*2+1, index+1)"\n                 (as-split-undetected.touchstart)="startDragging($event, index*2+1, index+1)">\n                <div class="as-split-gutter-icon"></div>\n            </div>\n        </ng-template>',styles:[":host{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;overflow:hidden;width:100%;height:100%}:host>.as-split-gutter{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;background-color:#eee;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}:host>.as-split-gutter>.as-split-gutter-icon{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}:host ::ng-deep>.as-split-area{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}:host ::ng-deep>.as-split-area.is-hided{-ms-flex-preferred-size:0!important;flex-basis:0!important;overflow-x:hidden;overflow-y:hidden}:host.is-horizontal{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}:host.is-horizontal>.as-split-gutter{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;cursor:col-resize;height:100%}:host.is-horizontal>.as-split-gutter>.as-split-gutter-icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}:host.is-horizontal ::ng-deep>.as-split-area{height:100%}:host.is-vertical{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}:host.is-vertical>.as-split-gutter{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;cursor:row-resize;width:100%}:host.is-vertical>.as-split-gutter .as-split-gutter-icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}:host.is-vertical ::ng-deep>.as-split-area{width:100%}:host.is-vertical ::ng-deep>.as-split-area.is-hided{max-width:0}:host.is-disabled>.as-split-gutter{cursor:default}:host.is-disabled>.as-split-gutter .as-split-gutter-icon{background-image:none}:host.is-transition.is-init:not(.is-dragging) ::ng-deep>.as-split-area,:host.is-transition.is-init:not(.is-dragging)>.as-split-gutter{-webkit-transition:-webkit-flex-basis .3s;transition:flex-basis .3s;-o-transition:flex-basis .3s;transition:flex-basis .3s,-webkit-flex-basis .3s,-ms-flex-preferred-size .3s}"]}),a("design:paramtypes",[t.NgZone,t.ElementRef,t.ChangeDetectorRef,t.Renderer2])],e)}(),f=function(){function e(e,t,i,r){this.ngZone=e,this.elRef=t,this.renderer=i,this.split=r,this._order=null,this._size=null,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}return Object.defineProperty(e.prototype,"order",{get:function(){return this._order},set:function(e){e=Number(e),this._order=isNaN(e)?null:e,this.split.updateArea(this,!0,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){e=Number(e),this._size=!isNaN(e)&&e>=0&&e<=100?e/100:null,this.split.updateArea(this,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=p(e),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"is-hided")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"is-hided"))},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.split.addArea(this),this.ngZone.runOutsideAngular(function(){e.transitionListener=e.renderer.listen(e.elRef.nativeElement,"transitionend",function(t){"flex-basis"===t.propertyName&&e.split.notify("transitionEnd")})})},e.prototype.setStyleOrder=function(e){this.renderer.setStyle(this.elRef.nativeElement,"order",e)},e.prototype.setStyleFlexbasis=function(e){this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",e)},e.prototype.lockEvents=function(){var e=this;this.ngZone.runOutsideAngular(function(){e.lockListeners.push(e.renderer.listen(e.elRef.nativeElement,"selectstart",function(e){return!1})),e.lockListeners.push(e.renderer.listen(e.elRef.nativeElement,"dragstart",function(e){return!1}))})},e.prototype.unlockEvents=function(){for(;this.lockListeners.length>0;){var e=this.lockListeners.pop();e&&e()}},e.prototype.ngOnDestroy=function(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)},o([t.Input(),a("design:type",Number),a("design:paramtypes",[Number])],e.prototype,"order",null),o([t.Input(),a("design:type",Number),a("design:paramtypes",[Number])],e.prototype,"size",null),o([t.Input(),a("design:type",Boolean),a("design:paramtypes",[Boolean])],e.prototype,"visible",null),e=o([t.Directive({selector:"as-split-area, [as-split-area]"}),a("design:paramtypes",[t.NgZone,t.ElementRef,t.Renderer2,g])],e)}(),b=function(){function e(){}return e.prototype.supports=function(e){return 0===e.indexOf("as-split-undetected.")},e.prototype.addEventListener=function(e,t,i){var r=this,n=t.slice(20);return this.manager.getZone().runOutsideAngular(function(){return r.manager.addEventListener(e,n,i)})},e=o([t.Injectable()],e)}(),y=function(){function e(){}var n;return n=e,e.forRoot=function(){return{ngModule:n,providers:[{provide:r.EVENT_MANAGER_PLUGINS,useClass:b,multi:!0}]}},e.forChild=function(){return{ngModule:n,providers:[]}},e=n=o([t.NgModule({imports:[i.CommonModule],declarations:[g,f],exports:[g,f]})],e)}();e.AngularSplitModule=y,e.SplitAreaDirective=f,e.SplitComponent=g,e.ɵa=b,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=try-split-pane.umd.min.js.map